<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Who am I?</title>
  <style>
* {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, sans-serif;
      max-width: 800px;
      margin: 1rem auto;
      padding: 0 1rem;
      line-height: 1.6;
      font-size: 16px;
      letter-spacing: -0.01em; /* Réduction de l'espacement entre lettres */
      background-color: #ffffff;
      color: #333333;
      transition: background-color 0.3s ease, color 0.3s ease;
    }

    h1 {
      margin-bottom: 0.5rem;
      font-size: 1.8rem;
      letter-spacing: -0.02em;
    }

    h2 {
      margin-top: 0;
      color: #666;
      font-weight: normal;
      font-size: 1.1rem;
      letter-spacing: -0.01em;
    }

    audio {
      width: 100%;
      margin: 1rem 0;
      min-height: 40px;
      background-color: #f5f5f5;
      border-radius: 8px;
    }

    #transcript {
      font-size: 1rem;
      line-height: 1.7;
      margin-bottom: 2rem;
      letter-spacing: -0.005em; /* Espacement très léger pour le texte */
    }

    .word {
      padding: 2px 4px;
      margin: 0 1px;
      transition: background 0.2s;
      cursor: pointer;
      border-radius: 3px;
      display: inline-block;
      letter-spacing: normal; /* Espacement normal pour les mots individuels */
    }

    .highlight {
      background-color: #ffc107;
      color: #000;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(255, 193, 7, 0.3);
    }

    strong {
      color: #000;
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    em {
      color: #666;
      font-style: italic;
      font-size: 0.9em;
      letter-spacing: normal;
    }

    footer {
      margin-top: 3rem;
      text-align: center;
      font-size: 0.85rem;
      color: #888;
      padding-bottom: 1rem;
    }

    footer a {
      color: #555;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }

    /* MODE SOMBRE basé sur les préférences système */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #1a1a1a;
        color: #e0e0e0;
      }

      h2 {
        color: #b0b0b0;
      }

      audio {
        background-color: #2a2a2a;
        border: 1px solid #444;
      }

      .highlight {
        background-color: #ffc107;
        color: #000;
        box-shadow: 0 2px 4px rgba(255, 193, 7, 0.4);
      }

      strong {
        color: #ffffff;
      }

      em {
        color: #b0b0b0;
      }

      footer {
        color: #888;
      }

      footer a {
        color: #aaa;
      }

      footer a:hover {
        color: #fff;
      }
    }

    /* Améliorations pour mobile */
    @media (max-width: 768px) {
      body {
        margin: 0.5rem auto;
        padding: 0 0.75rem;
        font-size: 15px;
        letter-spacing: -0.005em;
      }

      h1 {
        font-size: 1.5rem;
        margin-bottom: 0.3rem;
        letter-spacing: -0.015em;
      }

      h2 {
        font-size: 1rem;
        margin-bottom: 1rem;
      }

      audio {
          width: 100%;
          margin: 1rem 0;
          min-height: 40px;
          background-color: #f5f5f5;
          border-radius: 8px;
          border: none;
          outline: none;
      }

      #transcript {
        font-size: 0.95rem;
        line-height: 1.6;
      }

      .word {
        padding: 3px 5px;
        margin: 1px 2px;
        min-height: 24px;
        display: inline-flex;
        align-items: center;
      }

      .highlight {
        box-shadow: 0 3px 6px rgba(255, 193, 7, 0.4);
        transform: scale(1.05);
      }

      strong {
        display: block;
        margin: 0.5rem 0 0.2rem 0;
        font-size: 1rem;
      }

      em {
        font-size: 0.85rem;
        margin-right: 0.5rem;
      }

      footer {
        margin-top: 2rem;
        font-size: 0.8rem;
      }
    }

    /* Très petits écrans */
    @media (max-width: 480px) {
      body {
        padding: 0 0.5rem;
        font-size: 14px;
        letter-spacing: normal;
      }

      h1 {
        font-size: 1.3rem;
      }

      audio {
        height: 50px;
        border-radius: 8px;
      }

      #transcript {
        font-size: 0.9rem;
      }

      .word {
        padding: 2px 4px;
        margin: 1px;
      }
    }
  </style>
</head>
<body>
  <h1>Who am I?</h1>
  <h2>A simple demo of Podcast generator produced with Google Gemini</h2>
  <audio id="player" controls src="../sample2-gemini.mp3" preload="metadata">
    <p>Votre navigateur ne supporte pas l'élément audio. <a href="../sample2-gemini.mp3">Télécharger le fichier audio</a>.</p>
  </audio>
  <div id="transcript"><strong>John: </strong><em>playful</em> <span class="word" data-start="0.291" data-end="0.511" data-word-id="0">Who</span> <span class="word" data-start="0.671" data-end="0.771" data-word-id="1">am</span> <span class="word" data-start="1.103" data-end="1.269" data-word-id="2">I</span>? <span class="word" data-start="1.667" data-end="1.799" data-word-id="3">I</span> <span class="word" data-start="1.932" data-end="2.032" data-word-id="4">am</span> <span class="word" data-start="2.152" data-end="2.232" data-word-id="5">a</span> <span class="word" data-start="2.272" data-end="2.612" data-word-id="6">little</span> <span class="word" data-start="2.812" data-end="2.972" data-word-id="7">old</span> <span class="word" data-start="3.132" data-end="3.532" data-word-id="8">lady</span>. <span class="word" data-start="3.992" data-end="4.152" data-word-id="9">My</span> <span class="word" data-start="4.272" data-end="4.612" data-word-id="10">hair</span> <span class="word" data-start="4.692" data-end="4.772" data-word-id="11">is</span> <span class="word" data-start="4.952" data-end="5.253" data-word-id="12">white</span>. <span class="word" data-start="5.661" data-end="5.797" data-word-id="13">I</span> <span class="word" data-start="5.933" data-end="6.053" data-word-id="14">have</span> <span class="word" data-start="6.093" data-end="6.273" data-word-id="15">got</span> <span class="word" data-start="6.373" data-end="6.453" data-word-id="16">a</span> <span class="word" data-start="6.473" data-end="6.913" data-word-id="17">small</span> <span class="word" data-start="7.053" data-end="7.513" data-word-id="18">crown</span> <span class="word" data-start="7.713" data-end="7.813" data-word-id="19">and</span> <span class="word" data-start="7.903" data-end="7.983" data-word-id="20">a</span> <span class="word" data-start="7.993" data-end="8.333" data-word-id="21">black</span> <span class="word" data-start="8.393" data-end="9.134" data-word-id="22">handbag</span>. <span class="word" data-start="9.614" data-end="9.774" data-word-id="23">My</span> <span class="word" data-start="9.874" data-end="10.214" data-word-id="24">dress</span> <span class="word" data-start="10.314" data-end="10.394" data-word-id="25">is</span> <span class="word" data-start="10.514" data-end="10.934" data-word-id="26">blue</span>. <span class="word" data-start="11.454" data-end="11.594" data-word-id="27">My</span> <span class="word" data-start="11.674" data-end="12.135" data-word-id="28">country's</span> <span class="word" data-start="12.215" data-end="12.655" data-word-id="29">flag</span> <span class="word" data-start="12.735" data-end="12.815" data-word-id="30">is</span> <span class="word" data-start="12.995" data-end="13.295" data-word-id="31">red</span>, <span class="word" data-start="13.575" data-end="13.875" data-word-id="32">white</span> <span class="word" data-start="14.035" data-end="14.155" data-word-id="33">and</span> <span class="word" data-start="14.235" data-end="14.595" data-word-id="34">blue</span>. <span class="word" data-start="15.099" data-end="15.267" data-word-id="35">I</span> <span class="word" data-start="15.435" data-end="15.536" data-word-id="36">am</span> <span class="word" data-start="15.616" data-end="15.696" data-word-id="37">on</span> <span class="word" data-start="15.876" data-end="16.176" data-word-id="38">many</span> <span class="word" data-start="16.316" data-end="16.836" data-word-id="39">coins</span> <span class="word" data-start="16.936" data-end="17.016" data-word-id="40">and</span> <span class="word" data-start="17.116" data-end="17.636" data-word-id="41">stamps</span>. <span class="word" data-start="18.272" data-end="18.484" data-word-id="42">I</span> <span class="word" data-start="18.696" data-end="19.117" data-word-id="43">love</span> <span class="word" data-start="19.237" data-end="19.777" data-word-id="44">dogs</span> – <span class="word" data-start="20.217" data-end="20.397" data-word-id="45">my</span> <span class="word" data-start="20.497" data-end="20.897" data-word-id="46">dogs</span>' <span class="word" data-start="20.977" data-end="21.297" data-word-id="47">names</span> <span class="word" data-start="21.457" data-end="21.557" data-word-id="48">are</span> <span class="word" data-start="21.697" data-end="22.357" data-word-id="49">corgis</span>! <span class="word" data-start="22.838" data-end="22.998" data-word-id="50">Who</span> <span class="word" data-start="23.118" data-end="23.218" data-word-id="51">am</span> <span class="word" data-start="23.663" data-end="23.886" data-word-id="52">I</span>?<br><strong>Samantha: </strong><em>amused</em> <span class="word" data-start="24.998" data-end="25.339" data-word-id="53">Queen</span> <span class="word" data-start="25.379" data-end="26.14" data-word-id="54">Elizabeth</span> <span class="word" data-start="26.34" data-end="26.741" data-word-id="55">II</span> !!!<br><strong>John: </strong><em>smiling</em> <span class="word" data-start="27.382" data-end="27.903" data-word-id="56">Correct</span>, <span class="word" data-start="27.923" data-end="28.524" data-word-id="57">Samantha</span>! <span class="word" data-start="28.845" data-end="29.045" data-word-id="58">Your</span> <span class="word" data-start="29.105" data-end="29.346" data-word-id="59">turn</span> <span class="word" data-start="29.406" data-end="29.606" data-word-id="60">now</span> — <span class="word" data-start="29.967" data-end="30.408" data-word-id="61">describe</span> <span class="word" data-start="30.468" data-end="30.788" data-word-id="62">someone</span> <span class="word" data-start="30.828" data-end="30.928" data-word-id="63">for</span> <span class="word" data-start="30.969" data-end="31.089" data-word-id="64">me</span> <span class="word" data-start="31.129" data-end="31.209" data-word-id="65">to</span> <span class="word" data-start="31.229" data-end="31.489" data-word-id="66">guess</span>.<br><strong>Samantha: </strong><em>thinking</em> <span class="word" data-start="32.432" data-end="32.893" data-word-id="67">Alright</span>… <span class="word" data-start="33.493" data-end="33.713" data-word-id="68">Who</span> <span class="word" data-start="33.954" data-end="34.374" data-word-id="69">am</span> <span class="word" data-start="34.574" data-end="34.674" data-word-id="70">I</span>? <span class="word" data-start="34.915" data-end="34.995" data-word-id="71">I</span>’<span class="word" data-start="35.075" data-end="35.235" data-word-id="72">m</span> <span class="word" data-start="35.335" data-end="35.415" data-word-id="73">a</span> <span class="word" data-start="35.435" data-end="35.815" data-word-id="74">famous</span> <span class="word" data-start="35.915" data-end="36.616" data-word-id="75">scientist</span>. <span class="word" data-start="36.976" data-end="37.096" data-word-id="76">I</span> <span class="word" data-start="37.216" data-end="37.356" data-word-id="77">was</span> <span class="word" data-start="37.417" data-end="37.677" data-word-id="78">born</span> <span class="word" data-start="37.737" data-end="37.817" data-word-id="79">in</span> <span class="word" data-start="37.897" data-end="38.437" data-word-id="80">Germany</span>, <span class="word" data-start="38.778" data-end="38.918" data-word-id="81">but</span> <span class="word" data-start="39.028" data-end="39.108" data-word-id="82">I</span> <span class="word" data-start="39.138" data-end="39.478" data-word-id="83">later</span> <span class="word" data-start="39.538" data-end="39.779" data-word-id="84">moved</span> <span class="word" data-start="39.799" data-end="39.899" data-word-id="85">to</span> <span class="word" data-start="39.939" data-end="40.019" data-word-id="86">the</span> <span class="word" data-start="40.179" data-end="40.779" data-word-id="87">USA</span>. <span class="word" data-start="41.48" data-end="41.64" data-word-id="88">My</span> <span class="word" data-start="41.74" data-end="42.04" data-word-id="89">hair</span> <span class="word" data-start="42.12" data-end="42.281" data-word-id="90">was</span> <span class="word" data-start="42.441" data-end="42.941" data-word-id="91">wild</span> <span class="word" data-start="43.021" data-end="43.101" data-word-id="92">and</span> <span class="word" data-start="43.181" data-end="43.542" data-word-id="93">white</span>, <span class="word" data-start="43.922" data-end="44.042" data-word-id="94">and</span> <span class="word" data-start="44.202" data-end="44.282" data-word-id="95">I</span> <span class="word" data-start="44.362" data-end="44.683" data-word-id="96">often</span> <span class="word" data-start="44.743" data-end="44.983" data-word-id="97">stuck</span> <span class="word" data-start="45.043" data-end="45.163" data-word-id="98">my</span> <span class="word" data-start="45.263" data-end="45.543" data-word-id="99">tongue</span> <span class="word" data-start="45.603" data-end="45.723" data-word-id="100">out</span> <span class="word" data-start="45.784" data-end="45.864" data-word-id="101">in</span> <span class="word" data-start="45.924" data-end="46.464" data-word-id="102">photos</span>. <span class="word" data-start="47.053" data-end="47.249" data-word-id="103">I</span> <span class="word" data-start="47.445" data-end="47.945" data-word-id="104">developed</span> <span class="word" data-start="47.965" data-end="48.065" data-word-id="105">the</span> <span class="word" data-start="48.166" data-end="48.566" data-word-id="106">theory</span> <span class="word" data-start="48.686" data-end="48.766" data-word-id="107">of</span> <span class="word" data-start="48.906" data-end="49.707" data-word-id="108">relativity</span>. <span class="word" data-start="50.207" data-end="50.407" data-word-id="109">Who</span> <span class="word" data-start="50.608" data-end="50.728" data-word-id="110">am</span> <span class="word" data-start="51.043" data-end="51.201" data-word-id="111">I</span>?<br><strong>John: </strong><em>grinning</em> <span class="word" data-start="51.989" data-end="52.309" data-word-id="112">Easy</span> <span class="word" data-start="52.469" data-end="52.609" data-word-id="113">one</span>! <span class="word" data-start="52.95" data-end="53.27" data-word-id="114">You</span>’<span class="word" data-start="53.38" data-end="53.46" data-word-id="115">re</span> <span class="word" data-start="53.49" data-end="53.81" data-word-id="116">Albert</span> <span class="word" data-start="53.93" data-end="54.631" data-word-id="117">Einstein</span>!<br><strong>Samantha: </strong><em>laughing</em> <span class="word" data-start="55.832" data-end="56.573" data-word-id="118">Correct</span>! <span class="word" data-start="56.793" data-end="57.213" data-word-id="119">Okay</span>, <span class="word" data-start="57.253" data-end="57.433" data-word-id="120">your</span> <span class="word" data-start="57.473" data-end="57.693" data-word-id="121">turn</span> <span class="word" data-start="57.733" data-end="57.954" data-word-id="122">again</span>.<br><strong>John: </strong><em>playful</em> <span class="word" data-start="58.855" data-end="59.035" data-word-id="123">Who</span> <span class="word" data-start="59.155" data-end="59.255" data-word-id="124">am</span> <span class="word" data-start="59.547" data-end="59.693" data-word-id="125">I</span>? <span class="word" data-start="60.043" data-end="60.16" data-word-id="126">I</span> <span class="word" data-start="60.277" data-end="60.497" data-word-id="127">wear</span> <span class="word" data-start="60.638" data-end="60.717999999999996" data-word-id="128">a</span> <span class="word" data-start="60.778" data-end="61.018" data-word-id="129">red</span> <span class="word" data-start="61.199" data-end="61.519" data-word-id="130">suit</span> <span class="word" data-start="61.719" data-end="61.82" data-word-id="131">and</span> <span class="word" data-start="61.95" data-end="62.03" data-word-id="132">a</span> <span class="word" data-start="62.08" data-end="62.4" data-word-id="133">big</span> <span class="word" data-start="62.561" data-end="62.941" data-word-id="134">black</span> <span class="word" data-start="63.062" data-end="63.402" data-word-id="135">belt</span>. <span class="word" data-start="63.787" data-end="63.915" data-word-id="136">I</span> <span class="word" data-start="64.043" data-end="64.203" data-word-id="137">have</span> <span class="word" data-start="64.304" data-end="64.384" data-word-id="138">a</span> <span class="word" data-start="64.404" data-end="64.864" data-word-id="139">long</span> <span class="word" data-start="65.065" data-end="65.325" data-word-id="140">white</span> <span class="word" data-start="65.465" data-end="65.886" data-word-id="141">beard</span>. <span class="word" data-start="66.343" data-end="66.495" data-word-id="142">I</span> <span class="word" data-start="66.647" data-end="66.868" data-word-id="143">bring</span> <span class="word" data-start="66.988" data-end="67.448" data-word-id="144">presents</span> <span class="word" data-start="67.529" data-end="67.629" data-word-id="145">to</span> <span class="word" data-start="67.729" data-end="68.23" data-word-id="146">children</span> <span class="word" data-start="68.29" data-end="68.63" data-word-id="147">around</span> <span class="word" data-start="68.67" data-end="68.771" data-word-id="148">the</span> <span class="word" data-start="68.851" data-end="69.231" data-word-id="149">world</span> <span class="word" data-start="69.331" data-end="69.411" data-word-id="150">on</span> <span class="word" data-start="69.492" data-end="69.972" data-word-id="151">Christmas</span> <span class="word" data-start="70.133" data-end="70.393" data-word-id="152">Eve</span>. <span class="word" data-start="70.862" data-end="71.018" data-word-id="153">I</span> <span class="word" data-start="71.174" data-end="71.395" data-word-id="154">ride</span> <span class="word" data-start="71.485" data-end="71.565" data-word-id="155">a</span> <span class="word" data-start="71.575" data-end="72.056" data-word-id="156">sleigh</span> <span class="word" data-start="72.176" data-end="72.476" data-word-id="157">pulled</span> <span class="word" data-start="72.537" data-end="72.717" data-word-id="158">by</span> <span class="word" data-start="72.837" data-end="73.478" data-word-id="159">reindeer</span>. <span class="word" data-start="73.919" data-end="74.079" data-word-id="160">Who</span> <span class="word" data-start="74.199" data-end="74.279" data-word-id="161">am</span> <span class="word" data-start="74.364" data-end="74.444" data-word-id="162">I</span>?<br><strong>Samantha: </strong><em>excited</em> <span class="word" data-start="74.62" data-end="75.601" data-word-id="163">Santa</span> <span class="word" data-start="75.802" data-end="76.603" data-word-id="164">Claus</span>! 🎅<br><strong>John: </strong><em>cheerful</em> <span class="word" data-start="77.424" data-end="78.166" data-word-id="165">Exactly</span>!</div>
  <script>
    const audio = document.getElementById("player");
    const words = document.querySelectorAll(".word");

    // Créer un cache des timings pour une recherche rapide
    const wordTimings = Array.from(words).map(w => ({
      element: w,
      start: parseFloat(w.dataset.start),
      end: parseFloat(w.dataset.end)
    }));

    let currentlyHighlightedWord = null;

    function highlightCurrentWord() {
      const currentTime = audio.currentTime;
      let wordToHighlight = null;

      // Trouver le mot qui correspond au temps actuel
      for (const word of wordTimings) {
        if (currentTime >= word.start && currentTime < word.end) {
          wordToHighlight = word;
          break;
        }
      }

      // Mettre à jour le surlignage seulement si nécessaire pour éviter le scintillement
      if (wordToHighlight) {
        if (currentlyHighlightedWord !== wordToHighlight.element) {
          // Enlever l'ancien surlignage
          if (currentlyHighlightedWord) {
            currentlyHighlightedWord.classList.remove("highlight");
          }
          // Ajouter le nouveau
          wordToHighlight.element.classList.add("highlight");
          currentlyHighlightedWord = wordToHighlight.element;

          // Défilement automatique pour garder le mot visible
          if (window.innerWidth <= 768) {
            currentlyHighlightedWord.scrollIntoView({
              behavior: 'smooth',
              block: 'center',
              inline: 'nearest'
            });
          }
        }
      } else {
        // Aucun mot à surligner (ex: silence), enlever l'ancien surlignage
        if (currentlyHighlightedWord) {
          currentlyHighlightedWord.classList.remove("highlight");
          currentlyHighlightedWord = null;
        }
      }

      // Continuer la boucle si l'audio est en cours de lecture
      if (!audio.paused) {
        requestAnimationFrame(highlightCurrentWord);
      }
    }

    // Démarrer la boucle de surlignage
    audio.addEventListener("play", () => requestAnimationFrame(highlightCurrentWord));

    // Nettoyer le surlignage à la fin, en pause, ou lors d'une navigation manuelle
    const clearHighlight = () => {
      if (currentlyHighlightedWord) {
        currentlyHighlightedWord.classList.remove("highlight");
        currentlyHighlightedWord = null;
      }
    };
    audio.addEventListener("pause", clearHighlight);
    audio.addEventListener("ended", clearHighlight);
    audio.addEventListener("seeked", highlightCurrentWord);

    // Permettre de cliquer sur les mots pour naviguer dans l'audio
    words.forEach(word => {
      word.addEventListener("click", (e) => {
        e.preventDefault();
        const start = parseFloat(word.dataset.start);
        if (!isNaN(start)) {
          audio.currentTime = start;
          if (audio.paused) {
            audio.play().catch(err => console.log("Lecture automatique bloquée:", err));
          }
        }
      });

      // Amélioration tactile pour mobile
      word.addEventListener("touchstart", (e) => {
        e.target.style.transform = "scale(1.1)";
      });

      word.addEventListener("touchend", (e) => {
        setTimeout(() => {
          e.target.style.transform = "";
        }, 150);
      });
    });

    // Gérer les erreurs audio
    audio.addEventListener("error", (e) => {
      console.error("Erreur audio:", e);
      const transcript = document.getElementById("transcript");
      transcript.insertAdjacentHTML("beforebegin",
        '<div style="background: #ffe6e6; color: #d63031; padding: 1rem; border-radius: 8px; margin: 1rem 0;">' +
        'Impossible de charger le fichier audio. Vérifiez que le fichier existe et est accessible.' +
        '</div>'
      );
    });
  </script>
  <footer>
    <p>Generated by <a href="https://laurentftech.github.io/Podcast_generator" target="_blank">Podcast Generator</a></p>
  </footer>
</body>
</html>