<script>
  // Ce script s'exécute avant le rendu de la page pour éviter le "flash blanc" en mode sombre.
  // Il détecte la préférence de l'utilisateur et ajoute une classe 'dark' à l'élément <html> si nécessaire.
  (function() {
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      document.documentElement.classList.add('dark');
    }
  })();
</script>

<style>
:root {
  /* Variables pour le mode clair */
  --bg-color: #f4f4f4;
  --text-color: #333;
  --link-color: #007bff;
  --link-hover-color: #0056b3;
  --secondary-text-color: #555;
  --header-color: #333;
  --border-color: #ddd;
  --code-bg-color: #eef; /* Fond par défaut de Minima */
  --code-border-color: #ddd;
}

/* --- Styles pour les pages de présentation --- */

.screenshot {
  max-width: 100%;
  border-radius: 6px;
  margin: 1rem 0;
  border: 1px solid var(--border-color);
  display: block;
}

.button {
  display: inline-block;
  text-decoration: none;
  font-weight: 600;
  border-radius: 6px;  transition: background-color 0.2s, border-color 0.2s, filter 0.2s;
  border: 1px solid transparent;
  text-align: center;
  padding: 0.7rem 1.6rem;
}

.button-primary {
  background-color: #2da44e;
  color: white !important; /* Important pour surcharger les styles de lien du thème */
  font-size: 1.1rem;
  padding: 0.8rem 2rem;
  border-color: rgba(27, 31, 36, 0.15);
}

.button-secondary {
  background-color: #f6f8fa;
  color: var(--text-color) !important;
  border-color: rgba(27, 31, 36, 0.15);
}

.button-tertiary {
  background-color: transparent;
  color: var(--secondary-text-color) !important;
  border: none;
}

.button:hover {
  filter: brightness(95%);
}

html.dark {
  :root {
    /* Variables pour le mode sombre (inspirées de votre exemple) */
    --bg-color: #1e1e1e;
    --text-color: #e0e0e0;
    --table-text-color: #e0e0e0;
    --link-color: #bb86fc;
    --link-hover-color: #9e66e2;
    --secondary-text-color: #bdbdbd; /* Gris plus clair pour un meilleur contraste */
    --header-color: #e0e0e0;
    --border-color: #333;
    --code-bg-color: #2a2a2a; /* Un gris foncé pour le fond du code */
    --code-border-color: #444; /* Une bordure légèrement plus claire */
  }

  .site-header .menu-icon {
    background-color: #383838; /* Le fond gris pour le bouton */
    border-radius: 5px;
    padding: 8px 6px 4px 6px; /* Espace pour que le fond soit visible autour des traits */
  }

  .button-primary {
    background-color: #3fb950;
    border-color: #3fb950;
  }
  .button-secondary {
    background-color: #282a2e;
    border-color: var(--border-color);
  }
  .button:hover {
    filter: brightness(110%);
  }
}

body {
  background-color: var(--bg-color);
  color: var(--text-color);
  transition: background-color 0.3s, color 0.3s;
}

a {
  color: var(--link-color);
}

a:hover, a:focus {
  color: var(--link-hover-color);
}

h1, h2, h3, h4, h5, h6 {
  color: var(--header-color);
}

/* Style pour le sous-titre sous un h2 */
h2 + p {
  color: var(--secondary-text-color);
}

/* S'assure que la description du site est lisible en mode sombre */
.site-description {
  color: var(--secondary-text-color);
}

.site-footer {
  border-top-color: var(--border-color);
}

/* --- Styles pour les titres de page et les tableaux --- */

/* Assure que les titres de page et de post (liés ou non) sont clairs */
.post-title,
.post-link {
  color: var(--header-color);
}

/* Assure que le texte et les bordures des tableaux sont clairs */
th, td {
  color: var(--table-text-color);
  border-color: var(--border-color);
}

/* Style pour les blocs de code qui s'adapte */
code, pre {
  background-color: var(--code-bg-color);
  border: 1px solid var(--code-border-color);
}

/* --- Styles pour le header --- */

/* Correction de la bordure du header */
.site-header {
  border-bottom-color: var(--border-color);
}

/* Fond et bordure pour le menu de navigation mobile (hamburger) */
@media screen and (max-width: 600px) {
  /* Le conteneur de navigation mobile a un fond et une bordure clairs par défaut, on les corrige. */
  .site-nav {
    background-color: var(--bg-color);
    border: 0; /* Supprime le contour du menu mobile */
  }
}

/* Couleur des liens de navigation et du titre du site */
.site-header .site-title,
.site-header .page-link,
.site-header .page-link:visited {
  color: var(--text-color);
}

/* Couleur de l'icône du menu hamburger */
.site-header .menu-icon > svg path {
  fill: var(--header-color);
}
</style>
